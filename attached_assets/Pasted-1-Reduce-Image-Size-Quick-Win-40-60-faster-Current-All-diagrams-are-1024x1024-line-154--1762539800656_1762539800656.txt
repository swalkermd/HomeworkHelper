1. Reduce Image Size (Quick Win - 40-60% faster)
Current: All diagrams are 1024x1024 (line 154)

Optimization:

// Adaptive sizing based on diagram complexity
const sizeConfig = {
  geometry: "512x512",      // Simple shapes
  graph: "512x512",         // Coordinate planes  
  chart: "512x512",         // Data visualizations
  illustration: "1024x1024", // Complex biology diagrams
  physics: "768x768"        // Force diagrams
};

const size = sizeConfig[visualType] || "512x512";
Impact: Smaller images generate 2-3x faster (~10-15s instead of 30s)

2. Add Diagram Caching (Huge Win - Near-instant for duplicates)
Current: No caching - identical diagrams regenerate every time

Optimization:

// Hash-based caching
const diagramCache = new Map<string, { url: string, timestamp: number }>();

async function generateDiagram(description: string, hostname?: string): Promise<string> {
  // Create hash from description
  const hash = crypto.createHash('md5').update(description).digest('hex');
  
  // Check cache (24 hour TTL)
  const cached = diagramCache.get(hash);
  if (cached && Date.now() - cached.timestamp < 24 * 60 * 60 * 1000) {
    console.log(`♻️  Using cached diagram: ${hash}`);
    return cached.url;
  }
  
  // Generate new diagram...
  const url = await generateNewDiagram(description, hostname);
  diagramCache.set(hash, { url, timestamp: Date.now() });
  return url;
}
Impact:

Common diagrams (Krebs cycle, Pythagorean theorem) load instantly
Cache hit rate ~30-40% for educational content
Already implemented for biology keywords (lines 586-635) - just needs generation caching
3. Optimize Prompts (10-20% faster)
Current: Prompts are verbose (line 153):

prompt: `Educational ${visualType}: ${cleanDescription}. ${styleGuide} White background, black lines, labeled clearly. IMPORTANT: Use US decimal notation with periods (e.g., 9.8, 15.5) not commas.`
Optimization: Compress prompt using abbreviations:

prompt: `${visualType}: ${cleanDescription}. ${compressedStyleGuide}. Clean labels, white bg, black lines.`
Impact: Shorter prompts = 10-20% faster generation